<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('partials/meta') %>
    <title>Tensers - Security Incidents</title>
    <%- include('partials/links') %>
  </head>
  <body>
    <!-- layout start -->
    <div class="layout-wrapper active w-full">
      <div class="relative flex w-full">
        <%- include('partials/components/sidebar') %>
        <div
          class="body-wrapper flex-1 overflow-x-hidden dark:bg-darkblack-500"
        >
          <%- include('partials/components/topbar', {title: 'Security Incidents',
          description: 'Review and manage detected email security threats'}) %>
          <main class="h-screen w-full px-6 pt-[100px] sm:pt-[156px] xl:px-12">

            <!-- Incidents table -->
            <div class="mb-6">
              <div class="rounded-lg shadow-lg dark:bg-darkblack-600 overflow-hidden">
                <div class="p-4 flex justify-between items-center border-b dark:border-darkblack-400">
                  <h3 class="text-lg font-semibold text-white dark:text-white">Email Security Incidents</h3>
                  <div class="flex space-x-2">
                    <div class="relative">
                      <input type="text" placeholder="Search incidents..." class="w-64 px-4 py-2 rounded-lg border dark:bg-darkblack-500 dark:border-darkblack-400 dark:text-white">
                      <i class="fa fa-search absolute right-3 top-3 text-white"></i>
                    </div>
                    <button class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
                      <i class="fa fa-filter mr-2"></i>Filter
                    </button>
                  </div>
                </div>
                <div class="overflow-x-auto">
                  <table class="w-full whitespace-nowrap">
                    <thead>
                      <tr class="text-left text-xs font-semibold text-white uppercase tracking-wider dark:text-white bg-gray-50 dark:bg-darkblack-700">
                        <th class="px-4 py-3">ID</th>
                        <th class="px-4 py-3">Date</th>
                        <th class="px-4 py-3">Subject</th>
                        <th class="px-4 py-3">Sender</th>
                        <th class="px-4 py-3">Verdict</th>
                        <th class="px-4 py-3">Actions</th>
                      </tr>
                    </thead>
                    <tbody class="divide-y dark:divide-darkblack-400">
                      <% incidents.forEach(incident => { %>
                        <tr class="text-white dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-darkblack-700">
                          <td class="px-4 py-3 text-sm"><%= incident.id %></td>
                          <td class="px-4 py-3 text-sm"><%= incident.date %></td>
                          <td class="px-4 py-3 text-sm font-medium"><%= incident.subject %></td>
                          <td class="px-4 py-3 text-sm"><%= incident.sender %></td>
                          <td class="px-4 py-3 text-sm">
                            <span class="px-2 py-1 font-semibold leading-tight text-red-700 bg-red-100 rounded-full dark:bg-red-700 dark:text-red-100">
                              Phishing
                            </span>
                          </td>
                          <td class="px-4 py-3 text-sm">
                            <div class="flex space-x-2">
                              <a href="/report/<%= incident.id %>" class="px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-100 dark:hover:bg-blue-800 transition-colors">
                                <i class="fa fa-eye mr-1"></i>View
                              </a>
                              <button class="px-2 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200 dark:bg-red-900 dark:text-red-100 dark:hover:bg-red-800 transition-colors">
                                <i class="fa fa-trash mr-1"></i>Delete
                              </button>
                            </div>
                          </td>
                        </tr>
                      <% }); %>
                    </tbody>
                  </table>
                </div>
                <div class="px-4 py-3 flex items-center justify-between border-t dark:border-darkblack-400">
                  <div class="text-sm text-white dark:text-white">
                    Showing <span class="font-medium">1</span> to <span class="font-medium"><%= Math.min(10, incidents.length) %></span> of <span class="font-medium"><%= incidents.length %></span> results
                  </div>
                  <div class="flex space-x-1">
                    <button class="px-3 py-1 rounded-md bg-gray-100 text-white dark:bg-darkblack-700 dark:text-gray-300">Previous</button>
                    <button class="px-3 py-1 rounded-md bg-blue-500 text-white">1</button>
                    <button class="px-3 py-1 rounded-md bg-gray-100 text-white dark:bg-darkblack-700 dark:text-gray-300">2</button>
                    <button class="px-3 py-1 rounded-md bg-gray-100 text-white dark:bg-darkblack-700 dark:text-gray-300">Next</button>
                  </div>
                </div>
              </div>
            </div>
          </main>
        </div>
      </div>
    </div>

    <!-- layout end -->
    <%- include('partials/scripts') %>
  </body>
</html>


